<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>地震情報</title>
</head>
<body>
    <h1>地震情報（最新）</h1>
    <div id="display">データを読み込み中...</div>

    <script>
        // プロキシ経由のURL
        const api_url = "corsproxy.io";

        async function getEEW() {
            try {
                const response = await fetch(api_url);
                if (!response.ok) throw new Error(`HTTPエラー: ${response.status}`);
                
                const data = await response.json();
                
                // 変数 API に保存
                const API = data;
                console.log("取得成功！データの中身:", API);

                // 画面に表示する処理
                // Wolfx APIのキー名は「AnnouncedTime」や「Hypocenter」ですが、
                // データが空の場合を想定して || (または) を使います
                const time = API.AnnouncedTime || "不明";
                const place = API.Hypocenter || "情報なし";
                const mag = API.Magunitude || "不明";
                const intensity = API.Intensity || "不明";

                document.getElementById('display').innerText = 
                    `発表時刻: ${time}\n` +
                    `震源地: ${place}\n` +
                    `マグニチュード: ${mag}\n` +
                    `最大震度: ${intensity}`;

            } catch (error) {
                // どこでエラーが起きたか画面にも詳しく出す
                document.getElementById('display').innerText = "エラー: " + error.message;
                console.error("詳細なエラー内容:", error);
            }
        }

        getEEW();
    </script>
</body>
</html>
