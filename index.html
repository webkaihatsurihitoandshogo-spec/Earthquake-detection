<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>地震情報</title>
</head>
<body>
    <h1>地震情報（最新）</h1>
    <div id="display">データを読み込み中...</div>

    <script>
        // CORS回避用のプロキシURLを先頭に付けます
        const api_url = "corsproxy.io?https://api.wolfx.jp/jma_eew.json";

        async function getEEW() {
            try {
                const response = await fetch(api_url);
                if (!response.ok) throw new Error('ネットワークエラー');
                
                const data = await response.json();
                
                // 変数 API に保存
                const API = data;
                console.log("取得したデータ:", API);

                // 画面に表示
                document.getElementById('display').innerText = 
                    `発表時刻: ${API.AnnouncedTime || '不明'}\n` +
                    `震源地: ${API.Hypocenter || '情報なし'}\n` +
                    `マグニチュード: ${API.Magunitude || '不明'}\n` +
                    `最大震度: ${API.Intensity || '不明'}`;

            } catch (error) {
                document.getElementById('display').innerText = 
                    "エラーが発生しました。コンソールを確認してください。";
                console.error("Error details:", error);
            }
        }

        getEEW();
    </script>
</body>
</html>
