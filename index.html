<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>地震情報</title>
</head>
<body>
    <h1>地震情報（最新）</h1>
    <div id="display">データを読み込み中...</div>

    <script>
        // 「?」と「https://」がしっかり入っていることを確認してください
        const api_url = "corsproxy.io";

        async function getEEW() {
            try {
                // キャッシュを避けるためにランダムな数字を末尾に足す工夫（これもお勧めです）
                const finalUrl = api_url + "&t=" + new Date().getTime();
                
                const response = await fetch(finalUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTPエラー: ${response.status} (URLが間違っているかプロキシの制限です)`);
                }
                
                const data = await response.json();
                const API = data;

                document.getElementById('display').innerText = 
                    `発表時刻: ${API.AnnouncedTime || 'データなし'}\n` +
                    `震源地: ${API.Hypocenter || '情報なし'}\n` +
                    `マグニチュード: ${API.Magunitude || '不明'}\n` +
                    `最大震度: ${API.Intensity || '不明'}`;

            } catch (error) {
                document.getElementById('display').innerHTML = 
                    `<p style="color:red;">エラー: ${error.message}</p>`;
            }
        }

        getEEW();
    </script>
</body>
</html>
