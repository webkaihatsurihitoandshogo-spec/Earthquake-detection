<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>地震情報</title>
</head>
<body>
    <h1>地震情報（最新）</h1>
    <div id="display">読み込み中...</div>

    <script>
        // 2025年現在、直接アクセスが最も安定しています
        const api_url = "https://api.wolfx.jp/jma_eew.json";

        async function getEEW() {
            try {
                // cache: "no-store" を入れることで iPad のキャッシュを強制回避します
                const response = await fetch(api_url, { cache: "no-store" });
                
                if (!response.ok) throw new Error(`エラー: ${response.status}`);
                
                const API = await response.json();
                
                document.getElementById('display').innerText = 
                    `発表: ${API.AnnouncedTime || '不明'}\n` +
                    `場所: ${API.Hypocenter || '情報なし'}\n` +
                    `マグニチュード: ${API.Magunitude || '不明'}\n` +
                    `震度: ${API.Intensity || '不明'}`;

            } catch (e) {
                document.getElementById('display').innerText = "取得失敗: " + e.message;
            }
        }
        getEEW();
    </script>
</body>
</html>
